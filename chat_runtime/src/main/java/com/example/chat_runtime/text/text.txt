# Cấu hình kết nối MySQL
spring.datasource.url=jdbc:mysql://localhost:3306/ten_csdl?useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=123456

# Dialect MySQL
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# Tự tạo bảng nếu chưa có
spring.jpa.hibernate.ddl-auto=update

# Hiển thị câu lệnh SQL
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true



public class AppConfig {
  @Bean
  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
        .authorizeHttpRequests(auth -> auth
            .requestMatchers("/admin/**").hasRole("ADMIN")
            .requestMatchers("/user/**").hasAnyRole("USER", "ADMIN")
            .anyRequest().permitAll()
        )
        .formLogin(form -> form
            .loginPage("/login")
            .defaultSuccessUrl("/home", true)
            .permitAll()
        )
        .logout(logout -> logout
            .logoutUrl("/logout")
            .logoutSuccessUrl("/")
            .permitAll()
        )
        .csrf(csrf -> csrf.disable());

    return http.build();
  }
}

  <!-- Spring Boot Starter Security -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-security</artifactId>
    </dependency>




<!-- Thư viện JJWT chính -->
<dependency>
  <groupId>io.jsonwebtoken</groupId>
  <artifactId>jjwt-api</artifactId>
  <version>0.11.5</version>
</dependency>

<!-- Runtime dependencies: hỗ trợ mã hóa và Jackson cho JSON -->
<dependency>
  <groupId>io.jsonwebtoken</groupId>
  <artifactId>jjwt-impl</artifactId>
  <version>0.11.5</version>
  <scope>runtime</scope>
</dependency>

<dependency>
  <groupId>io.jsonwebtoken</groupId>
  <artifactId>jjwt-jackson</artifactId> <!-- dùng jackson thay vì gson -->
  <version>0.11.5</version>
  <scope>runtime</scope>
</dependency>
